<ng-container *ngIf="!currentUser; else isUser">
  <div class="login-container">
    <div class="login-box">
      <div class="login-header">
        <img src="assets/icons/dashlogo.png">
      </div>
      <div class="login-body">
        <form [formGroup]="loginForm" (ngSubmit)="submitLogin()">
          <mat-form-field>
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" placeholder="someone@offprint.net">
          </mat-form-field>
          <mat-form-field>
            <mat-label>Password</mat-label>
            <input matInput type="password" formControlName="password" placeholder="Super Secret">
          </mat-form-field>
          <mat-slide-toggle formControlName="rememberMe">Remember me for thirty days</mat-slide-toggle>
          <button type="submit" matRipple class="button-primary">Log In</button>
        </form>
      </div>
      <mat-progress-bar mode="indeterminate" *ngIf="loadingLogin"></mat-progress-bar>
    </div>
  </div>
</ng-container>

<ng-template #isUser>
  <div class="main-page">
    <div class="nav">
      <header>
        <div class="nav-box">
          <div class="user-menu-nav">
            <img class="user-menu-avatar" [src]="currentUser.profile.avatar"/>
            <div class="user-menu-dropdown">
              <a class="menu-icon" (click)="logOut()"><span class="stat-counter">sign out</span></a>
            </div>
          </div>
          <div class="site-logo">
            <img src="assets/icons/dashlogo.png">
          </div>
          <div class="search-menu">
            <button matRipple class="search">Search</button>
          </div>
        </div>
      </header>
    </div>
    
    <nav>
      <div class="nav-items">
        <a matRipple [routerLink]="['/home']" routerLinkActive="router-link-active"><span class="link-icon"><i-feather name="home"></i-feather></span><span>Home</span></a>
        <a matRipple [routerLink]="['/queue']" routerLinkActive="router-link-active" class="inner-left"><span class="link-icon"><i-feather name="list"></i-feather></span><span>Queue</span></a> 
        <a matRipple [routerLink]="['/news']" routerLinkActive="router-link-active"><span class="link-icon"><i-feather name="hash"></i-feather></span><span>News</span></a>
        <a matRipple [routerLink]="['/docs']" routerLinkActive="router-link-active"><span class="link-icon"><i-feather name="briefcase"></i-feather></span><span>Docs</span></a>
        <a matRipple [routerLink]="['/reports']" routerLinkActive="router-link-active"><span class="link-icon"><i-feather name="alert-triangle"></i-feather></span><span>Reports</span></a>
        <a matRipple [routerLink]="['/users']" routerLinkActive="router-link-active"><span class="link-icon"><i-feather name="users"></i-feather></span><span>Users</span></a>
        <a matRipple [routerLink]="['/audit']" routerLinkActive="router-link-active"><span class="link-icon"><i-feather name="clipboard"></i-feather></span><span>Audit</span></a>
      </div>
    </nav>
    
    <div class="main-stage">
      <div class="container">
        <router-outlet></router-outlet>
      </div>
    </div>

    <div class="footer">
      <div class="footer-info">
        &copy; 2020 Offprint Studios
      </div>
    </div>
  </div>
</ng-template>